<html> 
    <head> 
        <title>Frogger</title> 
        <style> body { margin: 0; } canvas { width: 100%; height: 100% } </style> 
    </head> 

    <body> 
        <script src="three.js"></script> 
        <script src="DynamicObj/Bus.js"></script>
        <script src="DynamicObj/Car.js"></script>
        <script src="DynamicObj/Frog.js"></script>
        <script src="StaticObj/River.js"></script>
        <script src="StaticObj/Road.js"></script>
        <script src="StaticObj/Riversides.js"></script>
        <script src="StaticObj/Roadside.js"></script>

        <!-- Shaders -->
        <script type="x-shader/x-vertex" id="vertexShader">

            varying vec3 vNormal;
            varying vec3 eye;

            void main() {

            vNormal = normal;

            vec4 eyeAux = -(modelViewMatrix * vec4( position, 1.0 ));
            eye = normalize(eyeAux.xyz);

            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

            }

        </script>

        <script type="x-shader/x-fragment" id="fragmentShader">


            uniform vec3 ambient;
            uniform vec3 diffuse;
            uniform vec3 spec;
            uniform float shininess;
            uniform float offset;

            varying vec3 vNormal;
            varying vec3 eye;

            void main() {

                vec3 light = vec3(0.1, 0.0, 1.0);
                light = normalize(light);
                vec3 vAux = normalize(vNormal);
                
                float dProd = max(0.0, dot(vAux, light));
                vec3 l_diff = dProd * diffuse;
                
                vec3 l_spec = vec3(0.0, 0.0, 0.0);
                
                if(dProd > 0.0){
                    vec3 h = normalize(eye + light);
                    float int_spec = max(dot(h,vAux), 0.0);
                    l_spec = spec * max( pow(int_spec, shininess), 0.0); 
                }
                
                vec3 sum = l_diff + l_spec;
                vec3 color = max(ambient, sum);
                gl_FragColor = vec4(color, 1.0);
            }

        </script>

        <script>

            ///////////////////////////////////////////////////////////////////////////////// Main Variables
            var scene = new THREE.Scene();
            var camera;
            var camType = 1;

            // Shader Association
            var vertexShader = document.getElementById('vertexShader').textContent;
            var fragmentShader = document.getElementById('fragmentShader').textContent;

            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            ///////////////////////////////////////////////////////////////////////////////// Camera Functions

            function updateCamera() {
    if (camType === 1) {
        camera = new THREE.OrthographicCamera(window.innerWidth / -100, window.innerWidth / 100,
                window.innerHeight / 100, window.innerHeight / -100, -500, 1000);
        camera.position.z = 9.0;
    }
    else if (camType === 2) {
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 9.0;
    }
    else {
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(frog.position.x, frog.position.y - 1, frog.position.z + 1);
        camera.lookAt(frog.position);
    }

}

            ///////////////////////////////////////////////////////////////// Keyboard Callbacks

            document.addEventListener('keydown', onDocumentKeyDown, false);
            function onDocumentKeyDown(event) {
    event = event || window.event;
    var keycode = event.keyCode;
    switch (keycode) {
        case 37 : //left arrow
            left = true;
            /*var mytext = "Hello again";
             document.write(mytext);*/
            break;
        case 38 : // up arrow 
            up = true;
            break;
        case 39 : // right arrow
            right = true;
            break;
        case 40 : //down arrow
            down = true;
            break;
        case 49 : //1 button ortogonal camera 
            camType = 1;
            break;
        case 50 : //2 button perspective camera
            camType = 2;
            break;
        case 51 : //3 button 3rd person camera
            camType = 3;
            break;
    }
    document.addEventListener('keyup', onDocumentKeyUp, false);
}

            function onDocumentKeyUp(event) {
    event = event || window.event;
    var keycode = event.keyCode;
    switch (keycode) {
        case 37 : //left arrow
            left = false;
            /*var mytext = "Hello again";
             document.write(mytext);*/
            break;
        case 38 : // up arrow 
            up = false;
            break;
        case 39 : // right arrow
            right = false;
            break;
        case 40 : //down arrow
            down = false;
            break;
    }
}

            //////////////////////////////////////////////////////////////////////////////// Lights  

            //Directional Light
            function directionalLight() {
    var dirLight = new THREE.DirectionalLight(0xffffff, 0.5);
    dirLight.color.setHSL(0.1, 1, 0.95);
    dirLight.position.set(-1, 1.75, 1);
    dirLight.position.multiplyScalar(50);
    scene.add(dirLight);

}
        </script>

        <script>

            // Create Objects
            var road = new Road();
            var river = new River();
            var roadside = new RoadSide();
            var riversides = new RiverSides();

            var frogger = new Frog();
            var cars = new Cars();
            var buses = new Bus();
            directionalLight();
                     
            // Render Scene
            var render = function () {
                updateCamera();
                updateFrog();
                updateBus();
                updateCars();
                requestAnimationFrame(render);
                renderer.render(scene, camera);
            };

            render();
        </script> 
    </body> 
</html>